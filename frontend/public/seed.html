<!DOCTYPE html>
<html>
<head>
  <title>Seed Test Data</title>
  <style>
    body { font-family: system-ui; max-width: 600px; margin: 50px auto; padding: 20px; }
    button { padding: 15px 30px; font-size: 18px; cursor: pointer; margin: 10px; }
    .success { color: green; }
    .warning { color: orange; }
    pre { background: #f5f5f5; padding: 15px; overflow: auto; max-height: 300px; }
  </style>
</head>
<body>
  <h1>üçÖ Seed Test Data</h1>
  <p>This will populate localStorage with sample tasks, projects, and stats for testing.</p>
  
  <button onclick="seedData()">Seed Data</button>
  <button onclick="clearData()">Clear All Data</button>
  <button onclick="window.location.href='/'">Go to App</button>
  
  <div id="status"></div>
  <pre id="output"></pre>

  <script>
    const now = new Date();
    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    const tomorrow = new Date(today.getTime() + 24 * 60 * 60 * 1000);
    const nextWeek = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);
    const yesterday = new Date(today.getTime() - 24 * 60 * 60 * 1000);

    const projects = [
      { id: 'proj-1', name: 'Work', color: '#3b82f6', completed: false, createdAt: yesterday.toISOString() },
      { id: 'proj-2', name: 'Personal', color: '#22c55e', completed: false, createdAt: yesterday.toISOString() },
      { id: 'proj-3', name: 'Learning', color: '#8b5cf6', completed: false, createdAt: yesterday.toISOString(), dueDate: nextWeek.toISOString() },
    ];

    const tasks = [
      { id: 'task-1', title: 'Review pull requests', projectId: 'proj-1', completed: false, estimatedPomodoros: 2, actualPomodoros: 1, createdAt: yesterday.toISOString(), dueDate: today.toISOString() },
      { id: 'task-2', title: 'Write documentation', projectId: 'proj-1', completed: false, estimatedPomodoros: 3, actualPomodoros: 0, createdAt: yesterday.toISOString(), dueDate: tomorrow.toISOString() },
      { id: 'task-3', title: 'Fix bug in auth flow', projectId: 'proj-1', completed: true, completedAt: yesterday.toISOString(), estimatedPomodoros: 2, actualPomodoros: 2, createdAt: yesterday.toISOString() },
      { id: 'task-4', title: 'Grocery shopping', projectId: 'proj-2', completed: false, estimatedPomodoros: 1, actualPomodoros: 0, createdAt: today.toISOString() },
      { id: 'task-5', title: 'Call mom', projectId: 'proj-2', completed: false, estimatedPomodoros: 1, actualPomodoros: 0, createdAt: today.toISOString(), dueDate: today.toISOString() },
      { id: 'task-6', title: 'Read DDIA Chapter 7', projectId: 'proj-3', completed: false, estimatedPomodoros: 4, actualPomodoros: 2, createdAt: yesterday.toISOString(), dueDate: nextWeek.toISOString() },
      { id: 'task-7', title: 'Practice Go exercises', projectId: 'proj-3', completed: false, estimatedPomodoros: 2, actualPomodoros: 0, createdAt: today.toISOString() },
      { id: 'task-8', title: 'Quick brainstorm', completed: false, estimatedPomodoros: 1, actualPomodoros: 0, createdAt: today.toISOString() },
    ];

    function generateStats() {
      const stats = [];
      for (let i = 6; i >= 0; i--) {
        const date = new Date(today.getTime() - i * 24 * 60 * 60 * 1000);
        const count = Math.floor(Math.random() * 6) + (i === 0 ? 3 : 1);
        
        for (let j = 0; j < count; j++) {
          const hour = 9 + Math.floor(Math.random() * 10);
          const timestamp = new Date(date);
          timestamp.setHours(hour, Math.floor(Math.random() * 60));
          
          stats.push({
            id: `stat-${date.toISOString().split('T')[0]}-${j}`,
            taskId: tasks[Math.floor(Math.random() * tasks.length)].id,
            completedAt: timestamp.toISOString(),
            duration: 25,
          });
        }
      }
      return stats;
    }

    function seedData() {
      const stats = generateStats();
      
      localStorage.setItem('pomodoro-tasks', JSON.stringify(tasks));
      localStorage.setItem('pomodoro-projects', JSON.stringify(projects));
      localStorage.setItem('pomodoro-stats', JSON.stringify(stats));
      
      document.getElementById('status').innerHTML = '<p class="success">‚úÖ Data seeded successfully!</p>';
      document.getElementById('output').textContent = JSON.stringify({
        tasks: tasks.length,
        projects: projects.length,
        stats: stats.length,
      }, null, 2);
    }

    function clearData() {
      localStorage.removeItem('pomodoro-tasks');
      localStorage.removeItem('pomodoro-projects');
      localStorage.removeItem('pomodoro-stats');
      localStorage.removeItem('pomodoro-settings');
      
      document.getElementById('status').innerHTML = '<p class="warning">üóëÔ∏è All data cleared!</p>';
      document.getElementById('output').textContent = '';
    }
  </script>
</body>
</html>
